<?xml version="1.0" encoding="UTF-8"?>
<root>
    <form name="connect">
        <field name="tid" rule="MesageTopic"></field><!-- 目标编号 -->
        <field name="uid" required="yes"></field><!-- 用户编号 -->
        <field name="gid" required="yes"></field><!-- 终端标识 -->
    </form>
    <form name="message">
        <field name="id"></field><!-- offset -->
        <field name="sn"  type="string"></field>
        <field name="tid" rule="Intact"></field>
        <field name="gid" rule="Intact"></field>
        <field name="uid" rule="Intact"></field>
        <field name="time">
            <param name="default">=%now</param>
            <param name="default-always">yes</param>
        </field><!-- 发送时间 -->
        <field name="type" type="enum"></field><!-- 目标类型, user,group,crowd -->
        <field name="kind" type="enum"></field><!-- 消息类型, note,text,link,image,audio,video -->
        <field name="body"></field><!-- 消息内容 -->
        <field name="file" type="file"></field><!-- 附带文件, kind 为 image,audio,video 时有值 -->
    </form>
    <enum name="type">
        <value name="user">用户</value>
        <value name="group">讨论组</value>
        <value name="crowd">临时组</value>
    </enum>
    <enum name="kind">
        <value name="note">通告</value>
        <value name="text">文本</value>
        <value name="link">链接</value>
        <value name="image">图片</value>
        <value name="audio">音频</value>
        <value name="video">视频</value>
    </enum>
</root>
